---
import Post from '../../layouts/Post.astro';
import { getEntryBySlug } from 'astro:content';

export const prerender = true;

const { slug } = Astro.params;
const entry = await getEntryBySlug('blog', slug);

if (!entry) {
  // If not found, go back to the blog list
  return Astro.redirect('/blog/');
}

// Render MDX/Markdown content and extract validated frontmatter as `data`
const { Content } = await entry.render();
const { title, description, pubDate, updatedDate, heroImage } = entry.data;
---
<Post
  title={title}
  description={description}
  pubDate={pubDate}
  updatedDate={updatedDate}
  heroImage={heroImage}
>
  <Content />
</Post>
